<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CW4</title>
  </head>
  <body>
    <h2 id="title" title="Put your name here">Fetching Remote</h2>
    <p title="navigator.platform">Platform: <span id="plat"></span></p>
    <p title="Battery level (integer)">Battery level: <span id="lev"></span></p>
    <p title="Latitude/Longitude (4 digits)">
      Location: <span id="loc"></span>
    </p>
    <p title="Does the URL exist?">
      URL
      <input
        type="url"
        id="url"
        value="https://bashar0101.github.io/bashar_khoujah_APT/index.html"
        onchange="check()"
      />
      <span id="resp">okey</span>
    </p>
    <hr />
    <b>Sample code</b>
    <pre
      id="sample"
    >function init() {<br>//complete the code below<br>    plat.innerText = navigator.platform<br>    navigator.geolocation<br>      .getCurrentPosition(p =&gt;<br>        loc.innerText = p.coords.latitude.toFixed(4) + " , " + p.coords.longitude.toFixed(4)<br>      );<br>    navigator.getBattery().then(b =&gt;<br>        lev.innerText = (b.level*100) + "%"<br>      );<br>    check();<br>}<br>function check() {<br>//complete the code below<br>    fetch(url.value).then(r =&gt; <br>      resp.innerText = "okey"<br>    ).catch(e =&gt; <br>      resp.innerText = "page not found"<br>    )<br>}</pre>

    <hr />
    <script>
      "use strict";
      function init() {
        //complete the code below
        plat.innerText = navigator.platform;
        navigator.geolocation.getCurrentPosition(
          (p) =>
            (loc.innerText =
              p.coords.latitude.toFixed(4) +
              " , " +
              p.coords.longitude.toFixed(4))
        );
        navigator
          .getBattery()
          .then((b) => (lev.innerText = b.level * 100 + "%"));
        check();
      }
      function check() {
        //complete the code below
        fetch(url.value)
          .then((r) => (resp.innerText = "okey"))
          .catch((e) => (resp.innerText = "page not found"));
      }
      title.innerText = document.title;
      sample.innerText = init + "\n" + check;
      init();
    </script>

    <!-- Code injected by live-server -->
    <script>
      // <![CDATA[  <-- For SVG support
      if ("WebSocket" in window) {
        (function () {
          function refreshCSS() {
            var sheets = [].slice.call(document.getElementsByTagName("link"));
            var head = document.getElementsByTagName("head")[0];
            for (var i = 0; i < sheets.length; ++i) {
              var elem = sheets[i];
              var parent = elem.parentElement || head;
              parent.removeChild(elem);
              var rel = elem.rel;
              if (
                (elem.href && typeof rel != "string") ||
                rel.length == 0 ||
                rel.toLowerCase() == "stylesheet"
              ) {
                var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, "");
                elem.href =
                  url +
                  (url.indexOf("?") >= 0 ? "&" : "?") +
                  "_cacheOverride=" +
                  new Date().valueOf();
              }
              parent.appendChild(elem);
            }
          }
          var protocol =
            window.location.protocol === "http:" ? "ws://" : "wss://";
          var address =
            protocol + window.location.host + window.location.pathname + "/ws";
          var socket = new WebSocket(address);
          socket.onmessage = function (msg) {
            if (msg.data == "reload") window.location.reload();
            else if (msg.data == "refreshcss") refreshCSS();
          };
          if (
            sessionStorage &&
            !sessionStorage.getItem("IsThisFirstTime_Log_From_LiveServer")
          ) {
            console.log("Live reload enabled.");
            sessionStorage.setItem("IsThisFirstTime_Log_From_LiveServer", true);
          }
        })();
      } else {
        console.error(
          "Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading."
        );
      }
      // ]]>
    </script>
  </body>
</html>
